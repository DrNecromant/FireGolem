{% extends "root/base.html" %}

{% block header %}
    <h4><a href="" id="task-name" data-type="text" data-url="{% url 'todo:details' task.id %}">{{ task.name }}</a></h4>
    <button type="button" class="btn btn-sm right" onclick="javascript:history.go(-1);">
        <span class="glyphicon glyphicon-menu-left white"></span>
    </button>
{% endblock %}


{% block content %}

{% load tz %}

<h4>Information</h4>
<form method="post">
<table class="table cursor-default">
    <tr><td class="start-column">Status</td><td>
        <a href="" id="task-status" data-type="select" data-source="{{ statuses_source }}"  data-value="{{ task.status.id }}" data-url="{% url 'todo:details' task.id %}">{{ task.status }}</a>
    </td></tr>
    <tr><td>Description</td><td>
        <a href="" id="task-description" data-type="textarea" data-rows="3" data-url="{% url 'todo:details' task.id %}">{{ task.description|default_if_none:"" }}</a>
    </td></tr>
    <tr><td>Assignee</td><td>
        <a href="" id="task-assignee" data-type="select" data-source="{{ users_source }}" data-value="{{ task.user.id }}" data-url="{% url 'todo:details' task.id %}">{{ task.assignee|default_if_none:"" }}</a>
    </td></tr>
    <tr><td>Area</td><td>
        <a href="" id="task-area" data-type="select" data-source="{{ areas_source }}" data-value="{{ task.area.id }}" data-url="{% url 'todo:details' task.id %}">{{ task.area|default_if_none:"" }}</a>
    </td></tr>
    <tr><td>Project</td><td>
        <a href="" id="task-project" data-type="select" data-source="{{ projects_source }}" data-value="{{ task.project.id }}" data-url="{% url 'todo:details' task.id %}">{{ task.project|default_if_none:"" }}</a>
    </td></tr>
    <tr><td>Estimation</td><td>
        <a href="" id="task-estimation" data-type="select" data-source="{{ estimations_source }}" data-value="{{ task.estimation }}" data-url="{% url 'todo:details' task.id %}">{{ task.estimation }}</a>
    </td></tr>
    <tr><td>Created</td><td>{{ task.created | localtime | date:"D, j M Y H:i"}}</td></tr>
    <tr><td>Updated</td><td>{{ task.updated | localtime | date:"D, j M Y H:i"}}</td></tr>
</table>
</form>

<h4>Comments&nbsp;&nbsp
    <button type="button" class="btn btn-xs" data-toggle="modal" data-target="#addWorkLog">
        <span class="glyphicon glyphicon-time white"></span> Add
    </button>
</h4>
<table class="table cursor-default">
    {% for post in posts %}
        <tr><td>{{ post.created | localtime | date:"D, j M Y H:i"}}</td><td>{{ post.body }}</td></tr>
    {% endfor %}
</table>

{% endblock %}

{% block footer %}
    <button type="button" class="btn btn-sm" data-toggle="modal" data-target="#deleteTask">
        <span class="glyphicon glyphicon-trash white"></span> Remove
    </button>
{% endblock %}
